import{d as $,r as v,o as a,a as u,b as s,t as c,j as f,u as m,l as q,g as T,ax as b,F as C,i as S,bE as I,h as k,k as D,n as w,aB as N,az as U,w as x,bz as P,ad as z}from"./index.db4b08e0.js";import{m as F}from"./mutation.640962a3.js";import R from"./TSpinner.f247bbba.js";import{N as L}from"./Input.a8ee46ca.js";import"./use-locale.145fb545.js";import"./use-merged-state.119a85f6.js";const j={class:"product-info"},K=["href"],V=["src"],E={class:"product-meta"},G={class:"fs-13 fw-600"},O={class:"discussion-info"},Z=["src"],A={class:"dicussion-content"},Q={class:"discussion-starter"},H={class:"name"},J=s("i",{class:"bi bi-dot fs-16"},null,-1),M={class:"fs-13"},W={class:"content"},X={class:"fw-600 fs-14"},Y={class:"fs-12 fw-500"},ss={key:1,class:"discussion-conversation"},es={class:"conversation"},ts=["src"],os={class:"conversation-meta"},ns={class:"conversation-user fs-13"},is=s("i",{class:"bi bi-dot fs-16"},null,-1),as={key:0,class:"seller-badge fs-11 fw-500"},ls={class:"fw-500"},rs={class:"conversation"},cs=["src"],us={class:"conversation-meta"},ds={class:"conversation-user fs-13"},ps=s("i",{class:"bi bi-dot fs-16"},null,-1),_s={key:0,class:"seller-badge fs-11 fw-500"},ms={class:"fw-500"},hs={class:"discussion-input"},vs=s("span",{class:"fs-13"},"Balas",-1),fs=$({__name:"DiscussionCard",props:{imgProduct:null,productName:null,productPrice:null,productUrl:null,oppositeThumbnailUrl:null,userNameStarter:null,contentStarter:null,timestampStarter:null,conversation:null,totalConversation:null,isUnResponsed:{type:Boolean},shopid:null,questionId:null},setup(g){const e=g,t=v(!1),p=v([]),l=v(""),n=(r,o)=>new Promise((_,i)=>{t.value=!0,N.post("diskusi/detail",{shopId:r,questionID:o},{params:{shopid:r}}).then(({data:B})=>_(B)).catch(i).finally(()=>t.value=!1)}),y=(r,o,_)=>{N.post("diskusi/create",{productIds:"{}",talkId:o,text:_},{params:{shopid:r}}).then(()=>{l.value="",d()})},d=async()=>{if(e.shopid&&e.questionId){const r=await n(e.shopid,e.questionId);p.value=r.data.discussionDataByQuestionID.question.answer}},h=()=>{e.shopid&&e.questionId&&y(e.shopid,e.questionId,l.value)};return(r,o)=>{var _;return a(),u("div",{class:w(["tpd-discussioncard",e.isUnResponsed&&"tpd-discussioncard-unresponsed"])},[s("div",j,[s("a",{href:e.productUrl,target:"_blank",class:"product-link-overlay"},null,8,K),s("img",{src:e.imgProduct,alt:"product-img"},null,8,V),s("div",E,[s("h4",G,c(e.productName),1),s("span",null,c(e.productPrice),1)])]),f(m(q),{class:"my-2"}),s("div",O,[s("img",{src:e.oppositeThumbnailUrl,alt:"oppositeThumbUrl"},null,8,Z),s("div",A,[s("div",Q,[s("div",H,[s("h5",null,c(e.userNameStarter),1),J,s("span",M,c(e.timestampStarter),1)]),s("div",W,[s("p",X,c(e.contentStarter),1)])]),e.totalConversation&&e.conversation&&!p.value.length&&e.totalConversation-e.conversation.length?(a(),u("div",{key:0,class:"discussion-see-else",onClick:d},[t.value?(a(),T(R,{key:0,"spinner-style":"border-top-color: #06b6d4; border-left-color: #7c3aed",size:"medium"})):b("",!0),s("h5",Y," Lihat "+c(e.totalConversation-e.conversation.length)+" komentar lainnya ",1)])):b("",!0),(_=e.conversation)!=null&&_.length?(a(),u("div",ss,[p.value.length?(a(!0),u(C,{key:1},S(p.value,i=>(a(),u("div",rs,[s("img",{src:i.userThumbnail,alt:"user"},null,8,cs),s("div",us,[s("div",ds,[s("h4",null,c(i.userName),1),ps,i.isSeller?(a(),u("span",_s,"Penjual")):b("",!0),s("span",null,c(i.createTimeFormatted),1)]),s("p",ms,c(i.content),1)])]))),256)):(a(!0),u(C,{key:0},S(e.conversation,i=>(a(),u("div",es,[s("img",{src:i.userThumbnail,alt:"user"},null,8,ts),s("div",os,[s("div",ns,[s("h4",null,c(i.userName),1),is,i.isSeller?(a(),u("span",as,"Penjual")):b("",!0),s("span",null,c(i.createTimeFormatted),1)]),s("p",ls,c(i.content),1)])]))),256))])):b("",!0),s("div",hs,[f(m(L),{onKeypress:I(h,["enter"]),placeholder:"Balas diskusi...",value:l.value,"onUpdate:value":o[0]||(o[0]=i=>l.value=i)},null,8,["onKeypress","value"]),f(m(D),{onClick:h,type:"primary"},{default:k(()=>[vs]),_:1})])])])],2)}}});const gs={class:"tpd-discussfilter"},bs=s("h4",{class:"fs-13 fw-500"},"Tampilkan Diskusi :",-1),ys={class:"fs-12 fw-500"},ks={class:"fs-12 fw-500"},Ds={class:"fs-12 fw-500"},ws=$({__name:"DiscussionFilter",props:{condition:null,count:null,loading:{type:Boolean}},emits:["update:condition"],setup(g,{emit:e}){const t=g;return(p,l)=>(a(),u("div",gs,[bs,f(m(D),{ghost:t.condition!=="unresponded",size:"small",round:"",onClick:l[0]||(l[0]=n=>e("update:condition","unresponded")),class:w(t.loading&&"filter-loading"),secondary:t.condition==="unresponded"},{default:k(()=>{var n;return[s("span",ys,"Belum Direspon ("+c(((n=t.count)==null?void 0:n.unresponded)||0)+")",1)]}),_:1},8,["ghost","class","secondary"]),f(m(D),{ghost:t.condition!=="problem",size:"small",round:"",onClick:l[1]||(l[1]=n=>e("update:condition","problem")),class:w(t.loading&&"filter-loading"),secondary:t.condition==="problem"},{default:k(()=>{var n;return[s("span",ks,"Bermasalah ("+c(((n=t.count)==null?void 0:n.problem)||0)+")",1)]}),_:1},8,["ghost","class","secondary"]),f(m(D),{ghost:t.condition!=="autoreplied",size:"small",round:"",onClick:l[2]||(l[2]=n=>e("update:condition","autoreplied")),class:w(t.loading&&"filter-loading"),secondary:t.condition==="autoreplied"},{default:k(()=>{var n;return[s("span",Ds,"Dibalas Otomatis ("+c(((n=t.count)==null?void 0:n.autoreplied)||0)+")",1)]}),_:1},8,["ghost","class","secondary"])]))}});const $s="/assets/chat-bubble.a25b344f.png",Ts={class:"tpd-zeroDiscussion fades fs-13"},Cs=["src"],Ss=s("h4",{class:"fw-400 fs-13"},"Tidak ada diskusi",-1),Ns=$({__name:"DiscussionZero",setup(g){return(e,t)=>(a(),u("div",Ts,[s("img",{src:m($s),alt:"bubble"},null,8,Cs),Ss]))}});const xs={class:"tpd-discusspanel"},Bs={key:1,class:"discussionlist"},Rs=$({__name:"DiscussionPanel",setup(g){const e=U(),t=v(""),p=v(!1),l=v({unresponded:0,problem:0,autoreplied:0}),n=v([]),y=(d,h)=>{n.value=[],F("getdiscussionlist","diskusi/list","POST",h,null,{onSuccess:({data:r})=>{const{problemTotal:o,unrespondedTotal:_,inbox:i}=r.discussionSellerDesktopInbox;l.value={...l.value,problem:o,unresponded:_},n.value=i},onLoading:r=>p.value=r},r=>`${r}?shopid=${d}`)};return x(()=>e.query.shop,d=>{d&&(t.value="",y(String(d),{filter:t.value,limit:10,page:1}))},{immediate:!0}),x(()=>t.value,d=>{y(String(e.query.shop),{filter:d,limit:10,page:1})}),(d,h)=>{const r=P("stagger");return a(),u("div",xs,[f(ws,{loading:p.value,count:l.value,condition:t.value,"onUpdate:condition":h[0]||(h[0]=o=>t.value=o)},null,8,["loading","count","condition"]),!n.value.length&&!p.value?(a(),T(Ns,{key:0})):z((a(),u("div",Bs,[(a(!0),u(C,null,S(n.value,o=>(a(),T(fs,{"img-product":o.productThumbnail,"product-name":o.productName,"product-url":o.productURL,"opposite-thumbnail-url":o.userThumbnail||"","user-name-starter":o.userName,"timestamp-starter":o.createTimeFormatted,"content-starter":o.content,conversation:o.answer,"total-conversation":o.totalAnswer,"is-un-responsed":o.isUnread,shopid:String(m(e).query.shop),"question-id":o.questionID},null,8,["img-product","product-name","product-url","opposite-thumbnail-url","user-name-starter","timestamp-starter","content-starter","conversation","total-conversation","is-un-responsed","shopid","question-id"]))),256))])),[[r,60]])])}}});export{Rs as default};
