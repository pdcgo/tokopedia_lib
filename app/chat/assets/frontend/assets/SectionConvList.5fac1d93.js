import{d as Y}from"./dayjs.min.cf2eabef.js";import{e as $,d as O,r as I,az as z,ao as H,o as a,a as o,b as s,n as _,ax as k,t as h,i as x,F as M,q as C,j as b,u as v,h as S,k as P,p as V,m as D,au as Q,c as tt,g as T,bH as et,w as st}from"./index.db4b08e0.js";import{i as at}from"./id.f45f6e07.js";import{m as F}from"./mutation.640962a3.js";import K from"./TSpinner.f247bbba.js";import{N as U}from"./Image.830a7497.js";import{u as ot}from"./messagePayload.54e5d9ee.js";import{N as it}from"./Popover.9be5e582.js";import"./fade-in-scale-up.cssr.6fe20355.js";import"./Tooltip.c677ca6c.js";import"./use-locale.145fb545.js";import"./index.eb8c481c.js";import"./use-compitable.ba41904e.js";import"./utils.5839b03b.js";import"./use-merged-state.119a85f6.js";var j={exports:{}};(function(r,t){(function(i,n){r.exports=n()})($,function(){return function(i,n,m){i=i||{};var u=n.prototype,d={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function c(e,f,p,y){return u.fromToBase(e,f,p,y)}m.en.relativeTime=d,u.fromToBase=function(e,f,p,y,A){for(var w,g,q,L=p.$locale().relativeTime||d,J=i.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],Z=J.length,E=0;E<Z;E+=1){var B=J[E];B.d&&(w=y?m(e).diff(p,B.d,!0):p.diff(e,B.d,!0));var N=(i.rounding||Math.round)(Math.abs(w));if(q=w>0,N<=B.r||!B.r){N<=1&&E>0&&(B=J[E-1]);var R=L[B.l];A&&(N=A(""+N)),g=typeof R=="string"?R.replace("%d",N):R(N,f,B.l,q);break}}if(f)return g;var X=q?L.future:L.past;return typeof X=="function"?X(g):X.replace("%s",g)},u.to=function(e,f){return c(e,f,this,!0)},u.from=function(e,f){return c(e,f,this)};var l=function(e){return e.$u?m.utc():m()};u.toNow=function(e){return this.to(l(this),e)},u.fromNow=function(e){return this.from(l(this),e)}}})})(j);const nt=j.exports,ct=["src","alt","title"],rt={class:"meta"},dt=["src","alt","title"],lt={class:"meta"},pt=O({__name:"MicroAttcSticker",props:{parsedTimestamp:null,attachmentId:null,isOpposite:{type:Boolean},isRead:{type:[Boolean,null]},data:null},setup(r){const t=r,i=I([]),n=z(),m=(u,d,c)=>{F("getAttachment","chat/attachment","POST",{attachmentIDs:u,messageId:d},{shopid:c},{onSuccess:({data:l})=>{i.value=[],l.chatAttachments.list.forEach(e=>{e.attributes.sticker_profile&&i.value.push({imageUrl:e.attributes.sticker_profile.image_url,title:e.attributes.sticker_profile.intention})})}})};return H(()=>{n.query.chat&&n.query.shop&&t.attachmentId&&t.attachmentId>1&&m(String(t.attachmentId),Number(n.query.chat),Number(n.query.shop))}),(u,d)=>t.data?(a(),o("div",{key:0,class:_(["attc-sticker",t.isOpposite?"opposite":"me"])},[s("img",{src:t.data.imageUrl,alt:t.data.title,title:t.data.title},null,8,ct),s("div",rt,[t.isOpposite?k("",!0):(a(),o("i",{key:0,class:_([t.isRead&&"readed","bi bi-check2-all fs-12"])},null,2)),s("span",null,h(t.parsedTimestamp),1)])],2)):(a(!0),o(M,{key:1},x(i.value,(c,l)=>(a(),o("div",{class:_(["attc-sticker",t.isOpposite?"opposite":"me"]),key:l},[s("img",{src:c.imageUrl,alt:c.title,title:c.title},null,8,dt),s("div",lt,[t.isOpposite?k("",!0):(a(),o("i",{key:0,class:_([t.isRead&&"readed","bi bi-check2-all fs-12"])},null,2)),s("span",null,h(t.parsedTimestamp),1)])],2))),128))}});const mt=C(pt,[["__scopeId","data-v-7fccea35"]]),ut={class:"meta"},ht={class:"meta"},_t={class:"meta"},ft=O({__name:"MicroAttcImage",props:{parsedTimestamp:null,attachmentId:null,isOpposite:{type:Boolean},isRead:{type:[Boolean,null]},data:null},setup(r){const t=r,i=z(),n=I([]),m=I(!1),u=(d,c,l)=>{F("getAttachment","chat/attachment","POST",{attachmentIDs:d,messageId:c},{shopid:l},{onSuccess:({data:e})=>{n.value=[],e.chatAttachments.list.forEach(f=>{f.attributes.image_url&&n.value.push({src:f.attributes.image_url,title:"Tokopedia Image"})})},onLoading:e=>m.value=e})};return H(()=>{i.query.chat&&i.query.shop&&t.attachmentId&&t.attachmentId>1&&u(String(t.attachmentId),Number(i.query.chat),Number(i.query.shop))}),(d,c)=>t.data&&!m.value?(a(),o("div",{key:0,class:_(["attc-image",t.isOpposite?"opposite":"me"])},[b(v(U),{style:{"border-radius":"6px"},src:t.data.src,alt:t.data.src,title:t.data.title},null,8,["src","alt","title"]),s("div",ut,[t.isOpposite?k("",!0):(a(),o("i",{key:0,class:_([t.isRead&&"readed","bi bi-check2-all"])},null,2)),s("span",null,h(t.parsedTimestamp),1)])],2)):n.value.length&&!m.value?(a(!0),o(M,{key:1},x(n.value,l=>(a(),o("div",{class:_(["attc-image",t.isOpposite?"opposite":"me"])},[b(v(U),{style:{"border-radius":"6px"},src:l.src||"https://ik.imagekit.io/q8c93uv11zf/no-image-icon-6_epe-49J1q.png?ik-sdk-version=javascript-1.4.3&updatedAt=1649071028601",alt:l.src,title:l.title},null,8,["src","alt","title"]),s("div",ht,[t.isOpposite?k("",!0):(a(),o("i",{key:0,class:_([t.isRead&&"readed","bi bi-check2-all fs-12"])},null,2)),s("span",null,h(t.parsedTimestamp),1)])],2))),256)):n.value.length&&!m.value?(a(),o("div",{key:2,class:_(["attc-image",t.isOpposite?"opposite":"me"])},[b(v(U),{style:{"border-radius":"6px"},src:"https://ik.imagekit.io/q8c93uv11zf/no-image-icon-6_epe-49J1q.png?ik-sdk-version=javascript-1.4.3&updatedAt=1649071028601",alt:"i.src",title:"Fallback"},null,8,["src"]),s("div",_t,[t.isOpposite?k("",!0):(a(),o("i",{key:0,class:_([t.isRead&&"readed","bi bi-check2-all fs-12"])},null,2)),s("span",null,h(t.parsedTimestamp),1)])],2)):(a(),o("div",{key:3,class:_(t.isOpposite?"opposite":"me")},[b(K,{text:"sedang memuat attachment data..."})],2))}});const gt=C(ft,[["__scopeId","data-v-490962a8"]]),G=r=>(V("data-v-0c57f194"),r=r(),D(),r),yt=G(()=>s("div",{class:"replyButton"},[s("i",{class:"bi bi-three-dots-vertical fs-12"})],-1)),vt=G(()=>s("i",{class:"bi bi-reply fs-13"},null,-1)),kt=G(()=>s("span",{class:"fs-12 fw-500 fn-secondary"},"Balas gan",-1)),At={class:"fw-500 fs-13 content-text"},bt={class:"meta"},wt=O({__name:"MicroAttcText",props:{parsedTimestamp:null,isOpposite:{type:Boolean},isRead:{type:[Boolean,null]},data:null},setup(r){const t=r,i=ot(),n=()=>{i.parent_reply={attachment_id:0,attachment_type:0,main_text:t.data.content,name:t.data.from,sender_id:t.data.fromId,source:t.data.source}};return(m,u)=>{var d;return a(),o("div",{class:_([t.isOpposite?"opposite":"me","px-2 py-1"])},[b(v(it),{style:{padding:"5px","box-shadow":"0 0 5px 0 rgba(220,220,220, .5)"},placement:"top-end"},{trigger:S(()=>[yt]),default:S(()=>[b(v(P),{onClick:n,size:"small",quaternary:""},{icon:S(()=>[vt]),default:S(()=>[kt]),_:1})]),_:1}),s("p",At,h((d=t.data.content)==null?void 0:d.replace(/\<br\>/gm,`
`)),1),s("div",bt,[t.isOpposite?k("",!0):(a(),o("i",{key:0,class:_([t.isRead&&"readed","bi bi-check2-all fs-13"])},null,2)),s("span",null,h(t.parsedTimestamp),1)])],2)}}});const Bt=C(wt,[["__scopeId","data-v-0c57f194"]]),Tt={class:"reply_Content"},It={class:"reply_ContentName"},Ot={class:"reply_ContentMainText"},St={class:"reply_Reply"},xt={class:"fw-500"},Mt={class:"meta"},Nt=O({__name:"MicroAttcReply",props:{parsedTimestamp:null,isOpposite:{type:Boolean},isRead:{type:[Boolean,null]},data:null},setup(r){const t=r;return(i,n)=>{var m,u,d;return a(),o("div",{class:_(["attc-reply fs-13",[t.isOpposite?"opposite":"me"]])},[s("div",Tt,[s("span",It,h((m=t.data)==null?void 0:m.from),1),s("p",Ot,h((u=t.data)==null?void 0:u.mainText),1)]),s("div",St,[s("span",xt,h((d=t.data)==null?void 0:d.content),1)]),s("div",Mt,[t.isOpposite?k("",!0):(a(),o("i",{key:0,class:_([t.isRead&&"readed","bi bi-check2-all fs-12"])},null,2)),s("span",null,h(t.parsedTimestamp),1)])],2)}}});const Ct=C(Nt,[["__scopeId","data-v-a7c90331"]]),Et="/assets/google.5410bedc.png",Ut="/assets/shopee.a0f3a93c.png",qt="/assets/tokopedia.3760ab06.png",Pt={key:0,class:"action_button"},zt=["src"],Ft=["src"],Lt=["src"],Jt={class:"productInfo"},Rt={class:"productDetail"},Xt=["title"],Yt={key:0,class:"productVariant"},Ht={class:"variant"},Kt={class:"fs-12 fw-400"},Gt={class:"price fn-secondary fs-14"},Qt={class:"stock fn-secondary fs-12"},Vt={class:"meta"},Dt={class:"productInfo"},jt={class:"productDetail"},Wt=["title"],Zt={key:0,class:"productVariant"},$t={class:"variant"},te={class:"fs-12 fw-400"},ee={class:"price fn-secondary fs-14"},se={class:"stock fn-secondary fs-12"},ae={class:"meta"},oe=O({__name:"MicroAttcProduct",props:{parsedTimestamp:null,isOpposite:{type:Boolean},isRead:{type:[Boolean,null]},attachmentId:null,data:null},setup(r){const t=r,i=I([]),n=I(!1),m=z(),u=(c,l,e)=>{F("getAttachment","chat/attachment","POST",{attachmentIDs:c,messageId:l},{shopid:e},{onSuccess:({data:f})=>{i.value=f.chatAttachments.list.map(p=>{let y={};if(p.attributes.product_id&&(y.productId=p.attributes.product_id),p.attributes.product_profile){const A=p.attributes.product_profile;y={...y,image:A.list_image_url[0],name:A.name,price:A.price,redirect:A.url,remaining_stock:A.remaining_stock,variant:A.variant}}return y})},onLoading:f=>n.value=f})},d=(c,l)=>{if(c&&l)switch(l){case"google":window.open(`https://www.google.co.id/search?q=${c}`,"_blank");break;case"shopee":window.open(`https://shopee.co.id/search?keyword=${c}`,"_blank");break;case"tokopedia":window.open(`https://www.tokopedia.com/search?st=product&q=${c}&srp_component_id=02.01.00.00&srp_page_id=&srp_page_title=&navsource=`,"_blank");break;default:window.open(`https://www.tokopedia.com/search?st=product&q=${c}&srp_component_id=02.01.00.00&srp_page_id=&srp_page_title=&navsource=`,"_blank");break}};return H(()=>{m.query.chat&&m.query.shop&&t.attachmentId&&t.attachmentId>1&&u(String(t.attachmentId),Number(m.query.chat),Number(m.query.shop))}),(c,l)=>!t.data&&!n.value?(a(!0),o(M,{key:0},x(i.value,e=>(a(),o("div",{class:_(["fs-13",t.isOpposite?"opposite":"me"]),style:{position:"relative"}},[t.isOpposite?(a(),o("div",Pt,[s("div",null,[b(v(P),{onClick:()=>d(e==null?void 0:e.name,"google"),title:"Cari supplier di Google",color:"#fff"},{default:S(()=>[s("img",{height:"14",width:"14",src:v(Et)},null,8,zt)]),_:2},1032,["onClick"]),b(v(P),{onClick:()=>d(e==null?void 0:e.name,"tokopedia"),title:"Cari supplier di Tokopedia",color:"#fff"},{default:S(()=>[s("img",{height:"14",width:"14",src:v(qt)},null,8,Ft)]),_:2},1032,["onClick"]),b(v(P),{onClick:()=>d(e==null?void 0:e.name,"shopee"),title:"Cari supplier di Shopee",color:"#fff"},{default:S(()=>[s("img",{height:"14",width:"14",src:v(Ut)},null,8,Lt)]),_:2},1032,["onClick"])])])):k("",!0),s("div",Jt,[b(v(U),{src:e==null?void 0:e.image,class:"productImage","object-fit":"contain"},null,8,["src"]),s("div",Rt,[s("h4",{class:"ptitle",title:e==null?void 0:e.name},h(e==null?void 0:e.name),9,Xt),e!=null&&e.variant?(a(),o("div",Yt,[(a(!0),o(M,null,x(e.variant,f=>(a(),o("div",Ht,[f.option.hex?(a(),o("div",{key:0,style:Q({backgroundColor:f.option.hex}),class:"colorIndicator"},null,4)):k("",!0),s("span",Kt,h(f.option.value),1)]))),256))])):k("",!0),s("span",Gt,h(e==null?void 0:e.price),1),s("span",Qt,"Stock : "+h(e==null?void 0:e.remaining_stock),1)])]),s("div",Vt,[t.isOpposite?k("",!0):(a(),o("i",{key:0,class:_([t.isRead&&"readed","bi bi-check2-all fs-12"])},null,2)),s("span",null,h(t.parsedTimestamp),1)])],2))),256)):t.data&&!n.value?(a(),o("div",{key:1,class:_(["fs-13",t.isOpposite?"opposite":"me"])},[s("div",Dt,[b(v(U),{src:t.data.image,class:"productImage","object-fit":"contain"},null,8,["src"]),s("div",jt,[s("h4",{class:"ptitle",title:t.data.name},h(t.data.name),9,Wt),t.data.variant?(a(),o("div",Zt,[(a(!0),o(M,null,x(t.data.variant,e=>(a(),o("div",$t,[e.option.hex?(a(),o("div",{key:0,style:Q({backgroundColor:e.option.hex}),class:"colorIndicator"},null,4)):k("",!0),s("span",te,h(e.option.value),1)]))),256))])):k("",!0),s("span",ee,h(t.data.price),1),s("span",se,"Stock : "+h(t.data.remaining_stock),1)])]),s("div",ae,[t.isOpposite?k("",!0):(a(),o("i",{key:0,class:_([t.isRead&&"readed","bi bi-check2-all fs-12"])},null,2)),s("span",null,h(t.parsedTimestamp),1)])],2)):(a(),o("div",{key:2,class:_(["fs-13",t.isOpposite?"opposite":"me"])},[b(K,{text:"Sedang memuat attachment produk..."})],2))}});const ie=C(oe,[["__scopeId","data-v-75ed05f0"]]),ne="data:image/png;base64,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",W=r=>(V("data-v-d562b127"),r=r(),D(),r),ce=["src"],re=W(()=>s("h4",{class:"fw-600"},"Jenis pesan ini belum didukung oleh BOT!",-1)),de=W(()=>s("span",{class:"fw-400 fs-12"},"Silahkan buka toko secara manual dan lakukan pengecekan mandiri",-1)),le={class:"is-flex is-justify-content-end is-align-items-center"},pe={class:"fw-500 fs-10 time"},me=O({__name:"MicroUnsupportType",props:{isOpposite:{type:Boolean},parsedTimestamp:null},setup(r){const t=r;return(i,n)=>(a(),o("div",{class:_(["unsupport_msg rd-4 fs-13 fw-500 fn-primary",{me:!t.isOpposite,opposite:t.isOpposite}])},[s("img",{src:v(ne),alt:"notsupport"},null,8,ce),s("div",null,[re,de,s("div",le,[s("span",pe,h(t.parsedTimestamp),1)])])],2))}});const ue=C(me,[["__scopeId","data-v-d562b127"]]),he=O({__name:"MiniChatBody",props:{isRead:{type:[Boolean,null]},attachmentId:null,message:null,messageId:null,shopId:null,isOpposite:{type:Boolean},parsedTimestamp:null,from:null,fromId:null,source:null,type:null,directAttachment:null},setup(r){const t=r,i=tt(()=>{var n;switch(t.type){case"image":case"invoice":case"product":case"reply":case"sticker":return t.type;default:return(n=t.message)!=null&&n.includes("<a rel=")?null:"text"}});return(n,m)=>{var u,d,c,l;return v(i)==="sticker"?(a(),T(mt,{key:0,"parsed-timestamp":t.parsedTimestamp,data:(u=t.directAttachment)==null?void 0:u.sticker,"attachment-id":t.attachmentId,"is-opposite":t.isOpposite,"is-read":t.isRead},null,8,["parsed-timestamp","data","attachment-id","is-opposite","is-read"])):v(i)==="image"?(a(),T(gt,{key:1,"attachment-id":t.attachmentId,data:(d=t.directAttachment)==null?void 0:d.image,"is-opposite":t.isOpposite,"is-read":t.isRead,"parsed-timestamp":t.parsedTimestamp},null,8,["attachment-id","data","is-opposite","is-read","parsed-timestamp"])):v(i)==="reply"?(a(),T(Ct,{key:2,data:(c=t.directAttachment)==null?void 0:c.reply,"is-opposite":t.isOpposite,"is-read":t.isRead,"parsed-timestamp":t.parsedTimestamp},null,8,["data","is-opposite","is-read","parsed-timestamp"])):v(i)==="product"?(a(),T(ie,{key:3,"attachment-id":t.attachmentId,"is-opposite":t.isOpposite,data:(l=t.directAttachment)==null?void 0:l.product,"is-read":t.isRead,"parsed-timestamp":t.parsedTimestamp},null,8,["attachment-id","is-opposite","data","is-read","parsed-timestamp"])):v(i)==="text"?(a(),T(Bt,{key:4,"is-opposite":t.isOpposite,"is-read":t.isRead,"parsed-timestamp":t.parsedTimestamp,data:{content:t.message||"",from:t.from,fromId:t.fromId,source:t.source}},null,8,["is-opposite","is-read","parsed-timestamp","data"])):(a(),T(ue,{key:5,"is-opposite":t.isOpposite,"parsed-timestamp":t.parsedTimestamp},null,8,["is-opposite","parsed-timestamp"]))}}}),_e={class:"sc-conversationlistWrapper scrollbar"},fe=s("span",{class:"fs-11 fn-secondary"},"Memuat data percakapan...",-1),ge=["onVnodeMounted"],ye=["data-timestamp"],ve={class:"sc-conversationlist mb-2"},qe=O({__name:"SectionConvList",props:{data:null,loadingLoadNext:{type:Boolean},scrollToken:null},emits:["loadNext"],setup(r,{emit:t}){const i=r;Y.extend(nt);const n=z(),m=p=>(Y.locale(at),Y(p).format("dddd, D MMM YYYY")),u=I(),d=I(),c=I(!1),l=(p="smooth")=>{var y;(y=u.value)==null||y.scrollIntoView({behavior:p})},e=p=>{if(i.data){const y=Object.keys(i.data);y.indexOf(p)===y.length-1&&setTimeout(()=>{d.value||l(),F("readMessage","chat/read","POST",null,{message_id:Number(n.query.chat),shopid:String(n.query.shop)}),setTimeout(()=>c.value=!0,1500)},500)}},f=p=>p?[...p].sort((y,A)=>{const w=Number(y.parsedTimestamp.replace(/:/gm,"")),g=Number(A.parsedTimestamp.replace(/:/gm,""));return w-g}):[];return et(d,p=>{p[0].isIntersecting&&t("loadNext")}),st(()=>i.scrollToken,(p,y)=>{p!==y&&setTimeout(l,300)},{immediate:!0}),(p,y)=>(a(),o("div",_e,[s("div",{class:_(["loadingIndicator",i.loadingLoadNext?"loadingIndicator-on":"loadingIndicator-off"])},[s("div",null,[i.loadingLoadNext?(a(),T(K,{key:0,size:"small"})):k("",!0),fe])],2),c.value?(a(),o("div",{key:0,id:"topElement",ref_key:"topElement",ref:d},null,512)):k("",!0),(a(!0),o(M,null,x(i.data,(A,w)=>(a(),o("div",{onVnodeMounted:()=>e(w),class:"sc-conversationGroup"},[s("div",{"data-timestamp":m(w),class:"sc-conversationGroupLabel fn-primary fw-300"},null,8,ye),s("div",ve,[(a(!0),o(M,null,x(f(A),(g,q)=>(a(),T(he,{"is-opposite":g.isOpposite,message:g.message,"parsed-timestamp":g.parsedTimestamp,"attachment-id":g.attachmentId,"message-id":g.messageId,"shop-id":g.shopId,type:g.type,"direct-attachment":g.directAttachment,"is-read":g.isRead,from:g.from,"from-id":g.fromId,source:g.source,key:g.id},null,8,["is-opposite","message","parsed-timestamp","attachment-id","message-id","shop-id","type","direct-attachment","is-read","from","from-id","source"]))),128))])],8,ge))),256)),s("div",{ref_key:"bottomElement",ref:u,id:"bottomElement"},null,512)]))}});export{qe as default};
