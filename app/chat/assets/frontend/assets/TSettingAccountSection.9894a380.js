import{d as k,f as v,_ as w,N as A,r as d,o as C,g as P,u as S}from"./index.db4b08e0.js";import{n as b}from"./index.browser.8e74d592.js";import{m as h}from"./mutation.640962a3.js";import{c as y}from"./TMessage.30ab47ac.js";const T=k({__name:"TSettingAccountSection",setup($){const g=v({loader:()=>w(()=>import("./MiniAccountInputer.5897c04a.js"),["assets/MiniAccountInputer.5897c04a.js","assets/MiniAccountInputer.ab06bfdd.css","assets/index.db4b08e0.js","assets/index.44fe606f.css","assets/Input.a8ee46ca.js","assets/use-locale.145fb545.js","assets/use-merged-state.119a85f6.js"]),loadingComponent:A}),u=y(),l=d(),i=d(""),c=d(!1);function f(e,o,n,s,r){return new Promise(a=>{h("addAccount","akuns","POST",{akun:{otp_password:s,password:n,username:o,pin:r},name:e,cookies:[]},{task_id:b(32)},{onError(p){const{response:t}=p,m=t==null?void 0:t.data;m?u.error(`${m.detail[0].toUpperCase()}${m.detail.slice(1)}`):u.error(`Gagal saat mencoba masuk / login akun "${o}"`),a(!0)},onSuccess(){u.success(`Berhasil menambahkan akun "${o}"`,3e3),a(!0)}})})}async function _(){if(l.value){const o=l.value.split(`
`).map(n=>n.split("|")).filter(n=>n.length>=3).map(n=>{var t;const s=(t=n[3])==null?void 0:t.replace(/\s/gm,""),r=n[2].replace(/\s/gm,""),a=n[1],p=n[0];return{otp_password:r,password:a,username:p,pin:s}});for(var e=0;e<o.length;e++){e==0&&(c.value=!0);const{otp_password:n,password:s,username:r,pin:a}=o[e];await f(i.value,r,s,n,a),e==o.length-1&&(c.value=!1)}}else u.warning("Payload kosong!",2e3)}return(e,o)=>(C(),P(S(g),{"account-list":l.value,"onUpdate:account-list":o[0]||(o[0]=n=>l.value=n),"group-name":i.value,"onUpdate:group-name":o[1]||(o[1]=n=>i.value=n),"button-loading":c.value,onOnChecking:_},null,8,["account-list","group-name","button-loading"]))}});export{T as default};
