import{ak as B,F as w,al as j,r as T,s as Z,w as L,a4 as h,v as b,z as f,d as K,a6 as P,c as V,Q as g,am as _,an as Q,ao as X,y as G,aj as J}from"./index.db4b08e0.js";function $(e,t=!0,r=[]){return e.forEach(n=>{if(n!==null){if(typeof n!="object"){(typeof n=="string"||typeof n=="number")&&r.push(B(String(n)));return}if(Array.isArray(n)){$(n,t,r);return}if(n.type===w){if(n.children===null)return;Array.isArray(n.children)&&$(n.children,t,r)}else n.type!==j&&r.push(n)}}),r}function W(e){const t=T(!!e.value);if(t.value)return Z(t);const r=L(e,n=>{n&&(t.value=!0,r())});return Z(t)}const ie=h("n-modal-body"),se=h("n-modal"),ae=h("n-drawer-body"),ue=h("n-drawer"),oe=h("n-popover-body");function A(e,t,r="default"){const n=t[r];if(n===void 0)throw new Error(`[vueuc/${e}]: slot[${r}] is empty.`);return n()}function F(e,t=!0,r=[]){return e.forEach(n=>{if(n!==null){if(typeof n!="object"){(typeof n=="string"||typeof n=="number")&&r.push(B(String(n)));return}if(Array.isArray(n)){F(n,t,r);return}if(n.type===w){if(n.children===null)return;Array.isArray(n.children)&&F(n.children,t,r)}else n.type!==j&&r.push(n)}}),r}function ce(e,t,r="default"){const n=t[r];if(n===void 0)throw new Error(`[vueuc/${e}]: slot[${r}] is empty.`);const a=F(n());if(a.length===1)return a[0];throw new Error(`[vueuc/${e}]: slot[${r}] should have exactly one child.`)}const c="@@coContext",Y={mounted(e,{value:t,modifiers:r}){e[c]={handler:void 0},typeof t=="function"&&(e[c].handler=t,b("clickoutside",e,t,{capture:r.capture}))},updated(e,{value:t,modifiers:r}){const n=e[c];typeof t=="function"?n.handler?n.handler!==t&&(f("clickoutside",e,n.handler,{capture:r.capture}),n.handler=t,b("clickoutside",e,t,{capture:r.capture})):(e[c].handler=t,b("clickoutside",e,t,{capture:r.capture})):n.handler&&(f("clickoutside",e,n.handler,{capture:r.capture}),n.handler=void 0)},unmounted(e,{modifiers:t}){const{handler:r}=e[c];r&&f("clickoutside",e,r,{capture:t.capture}),e[c].handler=void 0}},le=Y;function N(e,t){console.error(`[vdirs/${e}]: ${t}`)}class ee{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(t,r){const{elementZIndex:n}=this;if(r!==void 0){t.style.zIndex=`${r}`,n.delete(t);return}const{nextZIndex:a}=this;n.has(t)&&n.get(t)+1===this.nextZIndex||(t.style.zIndex=`${a}`,n.set(t,a),this.nextZIndex=a+1,this.squashState())}unregister(t,r){const{elementZIndex:n}=this;n.has(t)?n.delete(t):r===void 0&&N("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:t}=this;t||(this.nextZIndex=2e3),this.nextZIndex-t>2500&&this.rearrange()}rearrange(){const t=Array.from(this.elementZIndex.entries());t.sort((r,n)=>r[1]-n[1]),this.nextZIndex=2e3,t.forEach(r=>{const n=r[0],a=this.nextZIndex++;`${a}`!==n.style.zIndex&&(n.style.zIndex=`${a}`)})}}const E=new ee,l="@@ziContext",te={mounted(e,t){const{value:r={}}=t,{zIndex:n,enabled:a}=r;e[l]={enabled:!!a,initialized:!1},a&&(E.ensureZIndex(e,n),e[l].initialized=!0)},updated(e,t){const{value:r={}}=t,{zIndex:n,enabled:a}=r,u=e[l].enabled;a&&!u&&(E.ensureZIndex(e,n),e[l].initialized=!0),e[l].enabled=!!a},unmounted(e,t){if(!e[l].initialized)return;const{value:r={}}=t,{zIndex:n}=r;E.unregister(e,n)}},de=te;function k(e){return typeof e=="string"?document.querySelector(e):e()}const fe=K({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(e){return{showTeleport:W(P(e,"show")),mergedTo:V(()=>{const{to:t}=e;return t!=null?t:"body"})}},render(){return this.showTeleport?this.disabled?A("lazy-teleport",this.$slots):g(_,{disabled:this.disabled,to:this.mergedTo},A("lazy-teleport",this.$slots)):null}});function M(e){return e instanceof HTMLElement}function C(e){for(let t=0;t<e.childNodes.length;t++){const r=e.childNodes[t];if(M(r)&&(R(r)||C(r)))return!0}return!1}function D(e){for(let t=e.childNodes.length-1;t>=0;t--){const r=e.childNodes[t];if(M(r)&&(R(r)||D(r)))return!0}return!1}function R(e){if(!ne(e))return!1;try{e.focus({preventScroll:!0})}catch{}return document.activeElement===e}function ne(e){if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.getAttribute("disabled"))return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return e.type!=="hidden"&&e.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let d=[];const he=K({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(e){const t=Q(),r=T(null),n=T(null);let a=!1,u=!1;const S=document.activeElement;function y(){return d[d.length-1]===t}function m(i){var s;i.code==="Escape"&&y()&&((s=e.onEsc)===null||s===void 0||s.call(e,i))}X(()=>{L(()=>e.active,i=>{i?(q(),b("keydown",document,m)):(f("keydown",document,m),a&&z())},{immediate:!0})}),G(()=>{f("keydown",document,m),a&&z()});function v(i){if(!u&&y()){const s=I();if(s===null||s.contains(J(i)))return;o("first")}}function I(){const i=r.value;if(i===null)return null;let s=i;for(;s=s.nextSibling,!(s===null||s instanceof Element&&s.tagName==="DIV"););return s}function q(){var i;if(!e.disabled){if(d.push(t),e.autoFocus){const{initialFocusTo:s}=e;s===void 0?o("first"):(i=k(s))===null||i===void 0||i.focus({preventScroll:!0})}a=!0,document.addEventListener("focus",v,!0)}}function z(){var i;if(e.disabled||(document.removeEventListener("focus",v,!0),d=d.filter(p=>p!==t),y()))return;const{finalFocusTo:s}=e;s!==void 0?(i=k(s))===null||i===void 0||i.focus({preventScroll:!0}):e.returnFocusOnDeactivated&&S instanceof HTMLElement&&(u=!0,S.focus({preventScroll:!0}),u=!1)}function o(i){if(!!y()&&e.active){const s=r.value,p=n.value;if(s!==null&&p!==null){const x=I();if(x==null||x===p){u=!0,s.focus({preventScroll:!0}),u=!1;return}u=!0;const H=i==="first"?C(x):D(x);u=!1,H||(u=!0,s.focus({preventScroll:!0}),u=!1)}}}function O(i){if(u)return;const s=I();s!==null&&(i.relatedTarget!==null&&s.contains(i.relatedTarget)?o("last"):o("first"))}function U(i){u||(i.relatedTarget!==null&&i.relatedTarget===r.value?o("last"):o("first"))}return{focusableStartRef:r,focusableEndRef:n,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:O,handleEndFocus:U}},render(){const{default:e}=this.$slots;if(e===void 0)return null;if(this.disabled)return e();const{active:t,focusableStyle:r}=this;return g(w,null,[g("div",{"aria-hidden":"true",tabindex:t?"0":"-1",ref:"focusableStartRef",style:r,onFocus:this.handleStartFocus}),e(),g("div",{"aria-hidden":"true",style:r,ref:"focusableEndRef",tabindex:t?"0":"-1",onFocus:this.handleEndFocus})])}});export{he as F,fe as L,ie as a,ce as b,le as c,ae as d,ue as e,$ as f,A as g,se as m,oe as p,de as z};
