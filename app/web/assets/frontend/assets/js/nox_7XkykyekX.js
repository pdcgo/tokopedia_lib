import{r as f,R as z,b as l,j as a,F as h,C as A,E as s,J as E}from"./nox_Ao7tXQoge.js";import{d as D,D as F}from"./nox_tgQyAAAyp.js";import{a as k,A as L}from"./nox_krerotQoe.js";import{L as n}from"./nox_tgtApt7he.js";import{a as V}from"./nox_QXyprppkA.js";import{I as S}from"./nox_ygho7kAgX.js";import{I as o}from"./nox_krre7oyg7.js";import{S as m}from"./nox_7teyQ7Akr.js";import{m as u}from"./nox_yeeXokpeX.js";import{R as N}from"./nox_tpeohhXet.js";import"./nox_yAoXQgok7.js";import"./nox_oXreoyXoy.js";import"./nox_prAehkXhg.js";import"./nox_QXg7pXkkp.js";import"./nox_A7tek7epA.js";import"./nox_AQgQXghgt.js";import"./nox_kXtpeggoX.js";import"./nox_hggQyoy7A.js";function ae(){var v,_,y,w,C,R;const{mutate:M}=k("PutTokopediaDeleterSetting"),{mutate:P}=k("PutTokopediaDeleterRunDelete"),[x,T]=f.useState(""),g=z.createRef(),[t,r]=f.useState({limit_concurent:0,limit_product:0,title:[],product_status:"",category_id:"",start_time:0,end_time:0,akuns:[],sold_filter:void 0,view_filter:void 0,price_filter:void 0}),[d,O]=f.useState([D().subtract(30,"day"),D()]),j=()=>{V(x,g,e=>{u.warning({content:e,key:"warningvalidation"})},e=>{var i,b,I;t.akuns=e.filter(Boolean),t.start_time=d[0].unix(),t.end_time=d[1].unix(),(i=t.sold_filter)!=null&&i.max||(t.sold_filter=void 0),(b=t.view_filter)!=null&&b.max||(t.view_filter=void 0),(I=t.price_filter)!=null&&I.max||(t.price_filter=void 0),M({onSuccess(){u.info("Running deleter..."),P({onError(p){var c;u.error((c=p.response)==null?void 0:c.data.msg)}})},onError(p){var c;u.error((c=p.response)==null?void 0:c.data.msg)}},t)})};return l(A,{size:"small",title:"Tokopedia Product Deleter",children:a(h,{children:[l(L,{type:"info",message:"Format: username|password|otp_secret",showIcon:!0}),a(h,{children:[l(S.TextArea,{size:"large",autoSize:{minRows:24,maxRows:24},value:x,onChange:e=>T(e.target.value),ref:g}),l(A,{size:"small",type:"inner",title:"Filter",children:a(s,{style:{alignItems:"start"},children:[l(n,{style:{flex:1},label:"Filter Title (Regex Allowed) :",children:l(S.TextArea,{size:"large",autoSize:{minRows:16,maxRows:16},placeholder:`rokok herbal
obat pelangsing
regex-->obat|jamu|ramuan
                                    `,value:t.title.join(`
`),onChange:e=>r({...t,title:e.target.value.split(`
`).map(i=>i.trim()).filter(Boolean)})})}),a(h,{style:{width:"50%"},children:[a(s,{style:{width:"100%"},children:[l(n,{style:{flex:1},label:"Limit Concurrent :",children:l(o,{style:{width:"100%"},placeholder:"10",value:t.limit_concurent,onChange:e=>e&&r({...t,limit_concurent:e})})}),l(n,{style:{flex:1},label:"Limit Delete :",children:l(o,{style:{width:"100%"},placeholder:"10",value:t.limit_product,onChange:e=>e&&r({...t,limit_product:e})})})]}),a(s,{style:{width:"100%"},children:[l(n,{style:{flex:1},label:"Sold :",children:a(s,{style:{alignItems:"center",columnGap:7},children:[l(o,{style:{width:"100%"},placeholder:"Min",value:(v=t.sold_filter)==null?void 0:v.min,onChange:e=>{var i;return r({...t,sold_filter:{min:e||0,max:((i=t.sold_filter)==null?void 0:i.max)||0}})}}),"-",l(o,{style:{width:"100%"},placeholder:"Max",value:(_=t.sold_filter)==null?void 0:_.max,onChange:e=>{var i;return r({...t,sold_filter:{min:((i=t.sold_filter)==null?void 0:i.min)||0,max:e||0}})}})]})}),l(n,{style:{flex:1},label:"View :",children:a(s,{style:{alignItems:"center",columnGap:7},children:[l(o,{style:{width:"100%"},placeholder:"Min",value:(y=t.view_filter)==null?void 0:y.min,onChange:e=>{var i;return r({...t,view_filter:{min:e||0,max:((i=t.view_filter)==null?void 0:i.max)||0}})}}),"-",l(o,{style:{width:"100%"},placeholder:"Max",value:(w=t.view_filter)==null?void 0:w.max,onChange:e=>{var i;return r({...t,view_filter:{min:((i=t.view_filter)==null?void 0:i.min)||0,max:e||0}})}})]})})]}),l(n,{style:{flex:1},label:"Price :",children:a(s,{style:{alignItems:"center",columnGap:7},children:[l(o,{style:{width:"100%"},placeholder:"Min",prefix:"Rp.",value:(C=t.price_filter)==null?void 0:C.min,onChange:e=>{var i;return r({...t,price_filter:{min:e||0,max:((i=t.price_filter)==null?void 0:i.max)||0}})}}),"-",l(o,{style:{width:"100%"},placeholder:"Max",prefix:"Rp.",value:(R=t.price_filter)==null?void 0:R.max,onChange:e=>{var i;return r({...t,price_filter:{min:((i=t.price_filter)==null?void 0:i.min)||0,max:e||0}})}})]})}),l(n,{label:"Product Status :",children:a(m,{value:t.product_status,onChange:e=>r({...t,product_status:e}),defaultValue:"",children:[l(m.Option,{value:"",children:"All (No Status)"}),l(m.Option,{value:"ACTIVE",children:"Active"}),l(m.Option,{value:"VIOLATION",children:"Pelanggaran"}),l(m.Option,{value:"INACTIVE",children:"InActive"})]})}),l(n,{style:{flex:2},label:"Date Range :",children:l(F.RangePicker,{onChange:e=>{e!=null&&e[0]&&(e!=null&&e[1])&&O([e==null?void 0:e[0],e==null?void 0:e[1]])},format:"DD MMMM YYYY",value:d})}),l(E,{style:{backgroundColor:"#C2418D",boxShadow:"none",color:"#fff"},type:"primary",onClick:j,icon:l(N,{rev:"run-delete"}),children:"Run Delete"})]})]})})]})]})})}export{ae as default};
